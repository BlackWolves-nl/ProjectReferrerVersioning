<Window x:Class="WolvePack.VS.Extensions.ProjectReferrerVersioning.UI.Dialogs.VersionUpdateResultWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Version Update Summary" Height="600" Width="800" WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize" Background="{DynamicResource PrimaryBackgroundBrush}" Foreground="{DynamicResource PrimaryForegroundBrush}"
        Loaded="Window_Loaded">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <!-- Reuse existing theme (fallback to Dark) -->
                <ResourceDictionary Source="../Themes/Theme.Dark.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Style x:Key="ResultTextBlockStyle" TargetType="TextBlock" BasedOn="{StaticResource ThemedTextBlockStyle}">
                <Setter Property="TextWrapping" Value="Wrap" />
                <Setter Property="Margin" Value="2" />
            </Style>
        </ResourceDictionary>
    </Window.Resources>
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Header -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0 0 0 8">
            <TextBlock Text="Version Update Summary" FontSize="18" FontWeight="Bold" Style="{StaticResource ThemedTextBlockStyle}"/>
            <Border Margin="16,0,0,0" Padding="6,2" Background="{DynamicResource SecondaryBackgroundBrush}" CornerRadius="4">
                <TextBlock x:Name="CountsTextBlock" Style="{StaticResource ThemedTextBlockStyle}" FontWeight="Bold" />
            </Border>
        </StackPanel>

        <!-- Filter / copy row -->
        <DockPanel Grid.Row="1" Margin="0,0,0,8">
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                <Button Content="Copy All" Width="90" Margin="4,0" Click="CopyAll_Click" Style="{StaticResource ThemedButtonStyle}"/>
                <Button Content="Copy Errors" Width="100" Margin="4,0" Click="CopyErrors_Click" Style="{StaticResource ThemedButtonStyle}"/>
                <Button Content="Copy Successes" Width="115" Margin="4,0" Click="CopySuccesses_Click" Style="{StaticResource ThemedButtonStyle}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Show:" VerticalAlignment="Center" Margin="0,0,6,0" Style="{StaticResource ThemedTextBlockStyle}"/>
                <CheckBox x:Name="ShowSuccessesCheckBox" IsChecked="True" Margin="0,0,12,0" Checked="FilterChanged" Unchecked="FilterChanged" VerticalAlignment="Center">
                    <CheckBox.Content>
                        <TextBlock Text="Successes" Style="{StaticResource ThemedTextBlockStyle}"/>
                    </CheckBox.Content>
                </CheckBox>
                <CheckBox x:Name="ShowErrorsCheckBox" IsChecked="True" Checked="FilterChanged" Unchecked="FilterChanged" VerticalAlignment="Center">
                    <CheckBox.Content>
                        <TextBlock Text="Errors" Style="{StaticResource ThemedTextBlockStyle}"/>
                    </CheckBox.Content>
                </CheckBox>
            </StackPanel>
        </DockPanel>

        <!-- Results -->
        <Border Grid.Row="2" BorderBrush="{DynamicResource BorderBrushColor}" BorderThickness="1" Background="{DynamicResource SecondaryBackgroundBrush}" CornerRadius="4" Padding="8">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <ItemsControl x:Name="ResultsItemsControl">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Text}" Style="{StaticResource ResultTextBlockStyle}"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>

        <!-- Bottom buttons -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
            <Button Content="Close" Width="80" Click="Close_Click" Style="{StaticResource ThemedButtonStyle}"/>
        </StackPanel>
    </Grid>
</Window>
