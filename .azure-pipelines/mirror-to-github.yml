trigger:
  branches:
    include:
      - "*"   # mirror every branch

pool:
  vmImage: ubuntu-latest

steps:
  - checkout: self
    persistCredentials: true
    clean: true

  - script: |
      git config --global user.name "Azure DevOps Sync Bot"
      git config --global user.email "devops-bot@example.com"

      echo "Adding GitHub remote..."
      # The token from service connection will be injected automatically
      git remote add github https://$(github.user):$(github.token)@github.com/BlackWolves-nl/ProjectReferrerVersioning.git

      echo "Pushing all branches and tags to GitHub..."
      git push github --mirror
    displayName: "Mirror push to GitHub"
